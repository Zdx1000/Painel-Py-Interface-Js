<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Apresentação Diária - Recebimento Martins</title>
	<link rel="stylesheet" href="style.css" />
	<!-- Icones Fontisto Brain Circuit -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontisto/fontisto@latest/css/fontisto/fontisto.min.css">
	<!-- ApexCharts -->
	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
	<script defer src="script.js"></script>
	<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Ctext y='50%25' x='50%25' dominant-baseline='middle' text-anchor='middle' font-size='32'%3E%F0%9F%A7%A0%3C/text%3E%3C/svg%3E">
	<style>
		/* fallback mínimo caso style.css não carregue */
		body{background:#0d1117;color:#e6eef5;font-family:Segoe UI,Roboto,Arial;margin:0}
	</style>
</head>
<body>
	<header class="top daily">
	<h1 id="pageTitle"><i class="fi fi-ss-brain-circuit"></i> Apresentação diária — Recebimento CAD UDI</h1>
		<div class="controls">
			<label for="datePick">Selecione o dia</label>
			<input id="datePick" type="date" />
			<button id="loadDay">Carregar</button>
			<button id="editObs" type="button">Editar Observação</button>
			<button id="openTemporal" type="button">Grafico temporal</button>
			<!-- Controles de período (somente modo temporal) -->
			<span id="temporalControls" style="display:none; gap:8px; align-items:center;">
				<label for="rangeStart">Entre</label>
				<input id="rangeStart" type="date" />
				<label for="rangeEnd">e</label>
				<input id="rangeEnd" type="date" />
				<button id="loadRange" type="button">Filtrar</button>
			</span>
		</div>
	</header>
	<main>
		<!-- Seção do gráfico temporal (inicialmente oculta) -->
		<section class="cards" id="temporal_section" style="display:none;">
			<div class="card card-progress-3" style="grid-column: span 5;">
				<h3>Desempenho temporal</h3>
				<p class="muted">Linha: Paletes Agendados (SIRF) • Coluna: Paletes Produzidos (WMS)</p>
				<div class="temporalRow" style="display:flex; gap:12px; align-items:stretch;">
					<div style="flex:1 1 85%; min-width:0;">
						<div id="temporal_chart" style="width:100%; min-height: 360px;"></div>
					</div>
					<div style="flex:0 0 15%; min-width:160px;">
						<div id="temporal_total" style="width:100%; min-height: 360px;"></div>
					</div>
				</div>
			</div>
			<div class="card card-progress-3" style="grid-column: span 5;">
				<h3>Desempenho temporal (C3)</h3>
				<p class="muted">Linha: Qtd Descarga C3 • Coluna: Qtd Carregamento C3</p>
				<div class="temporalRow" style="display:flex; gap:12px; align-items:stretch;">
					<div style="flex:1 1 85%; min-width:0;">
						<div id="temporal_chart_c3" style="width:100%; min-height: 360px;"></div>
					</div>
					<div style="flex:0 0 15%; min-width:160px;">
						<div id="temporal_total_c3" style="width:100%; min-height: 360px;"></div>
					</div>
				</div>
			</div>
		</section>
		<section class="cards" id="cards">
			<div class="card">
				<h3>Paletes Agendados SIRF</h3>
				<p class="muted">Quantidade de paletes agendados no SIRF</p>
				<div class="value" id="v_agendados">0</div>
			</div>
			<div class="card">
				<h3>Qtd Paletes Produzidos WMS</h3>
				<p class="muted">Quantidade de paletes feito no dia WMS</p>
				<div class="value" id="v_produzidos">0</div>
			</div>
			<div class="card">
				<h3>Total de fichas SIRF</h3>
				<p class="muted">Quantidade total de fichas no dia SIRF</p>
				<div class="value" id="v_total_fichas">0</div>
			</div>
			<div class="card">
				<h3>Fichas finalizadas</h3>
				<p class="muted">Quantidade de fichas finalizadas no dia</p>
				<div class="value" id="v_finalizadas">0</div>
			</div>
			<div class="card">
				<h3>Paletes Pendentes</h3>
				<p class="muted">Peletes pendentes (Sobra)</p>
				<div class="value" id="v_paletes_pend">0</div>
			</div>
			<!-- Card de Progresso do dia (ocupa 2 colunas abaixo dos dois primeiros cards) -->
			<div class="card card-progress">
				<h3>Progresso paletes produzidos</h3>
				<p class="muted">Total = Paletes Agendados; Feito = Qtd Paletes Produzidos</p>
				<div class="progressRow">
					<span class="label">Feito</span>
					<span class="numbers"><span id="prog_done">0</span>/<span id="prog_total">0</span> (<span id="prog_pct">0</span>%)</span>
				</div>
				<div class="progressWrap"><div class="progressFill" id="prog_fill" style="width:0%"></div></div>
				<div class="extra" id="extra_block" style="display:none">
					<div class="progressRow">
						<span class="label">Extra</span>
						<span class="numbers extra-alert" id="prog_extra_msg"><span id="prog_extra_pct">0</span>% — Excedeu a capacidade de paletes produzidos</span>
					</div>
					<div class="progressWrap extra"><div class="progressFill extra" id="prog_extra_fill" style="width:0%"></div></div>
				</div>
			</div>

			<!-- Card de Progresso das Fichas (ocupa 2 colunas) -->
			<div class="card card-progress card-progress-3">
				<h3>Progresso ficha conferidas</h3>
				<p class="muted">Total = Total de fichas; Finalizadas = Fichas finalizadas; Extra = Paletes Pendentes</p>
				<div class="progressRow">
					<span class="label">Finalizadas</span>
					<span class="numbers"><span id="fichas_done">0</span>/<span id="fichas_total">0</span> (<span id="fichas_pct">0</span>%)</span>
				</div>
				<div class="progressWrap"><div class="progressFill" id="fichas_fill" style="width:0%"></div></div>
			</div>

			<div class="card card-progress-3">
				<h3>Veículos Granel x Paletizado</h3>
				<p class="muted">Comparativo diário dos chamados (valores absolutos)</p>
				<div class="dualRow">
					<span class="label">Veículo Granel</span>
					<span class="numbers" id="dual_granel_val_a">0</span>
				</div>
				<div class="progressWrap"><div class="progressFill bar-a" id="dual_granel_fill_a" style="width:0%"></div></div>
				<div class="dualRow">
					<span class="label">Veículo Paletizado</span>
					<span class="numbers" id="dual_granel_val_b">0</span>
				</div>
				<div class="progressWrap"><div class="progressFill bar-b" id="dual_granel_fill_b" style="width:0%"></div></div>
			</div>

			<div class="card card-progress-3 card-dual card-donut">
				<h3>Distribuição Granel x Paletizado</h3>
				<p class="muted">Percentual e totais acumulados do dia</p>
				<div class="donutRow">
					<div class="donut" id="donut_granel" aria-label="Donut Veículo Granel x Veículo Paletizado">
						<div class="donutHole">
							<div class="donutLabel"><span id="donut_granel_a">0</span>/<span id="donut_granel_b">0</span></div>
						</div>
					</div>
					<div class="donutLegend">
						<div><span class="dot a"></span>Granel: <span id="donut_granel_pct_a">0%</span></div>
						<div><span class="dot b"></span>Paletizado: <span id="donut_granel_pct_b">0%</span></div>
					</div>
					<div class="chipRow">
						<div class="chip">
							<span>Total Chamados</span>
							<strong id="chip_granel_total">0</strong>
						</div>
						<div class="chip">
							<span>Diferença Absoluta</span>
							<strong id="chip_granel_diff">0</strong>
						</div>
						<div class="chip">
							<span>Liderança</span>
							<strong id="chip_granel_leader">—</strong>
						</div>
					</div>
				</div>
			</div>

		</section>
		<section class="lists">
			<div class="list">
				<h3>Veículos pendentes (SOBRAS)</h3>
				<p class="muted">Quantidade de Veículos pendentes e sua porcentagem</p>
				<div class="value" id="v_pend_qtd">0</div>
				<ul id="list_pend"></ul>
				<div class="sumLine" id="sum_pend_qtd">Total de SOBRAS: 0</div>
			</div>
			<div class="list">
				<h3>Veículos Antecipados</h3>
				<p class="muted">Fichas antecipadas e seus veículos e sua porcentagem</p>
				<div class="value" id="v_antec_qtd">0</div>
				<ul id="list_antec"></ul>
				<div class="sumLine" id="sum_antec_qtd">Total de Paletes: 0</div>
			</div>
			<!-- Comparativo imediatamente abaixo de Veículos pendentes x Fichas antecipadas -->
			<div class="list list-dual">
				<h3>Comparativo do dia (Veículos pendentes x Fichas antecipadas)</h3>
				<div class="dualBox">
					<div class="dualLeft">
						<div class="dualRow">
							<span class="label">Veículos pendentes</span>
							<span class="numbers" id="dual_vp_val_a">0</span>
						</div>
						<div class="dualWrap"><div class="dualFill c" id="dual_vp_fill_a" style="width:0%"></div></div>
						<div class="dualRow">
							<span class="label">Fichas antecipadas</span>
							<span class="numbers" id="dual_vp_val_b">0</span>
						</div>
						<div class="dualWrap"><div class="dualFill d" id="dual_vp_fill_b" style="width:0%"></div></div>
					</div>
					<div class="dualRight">
						<div class="donut" id="donut_vp" aria-label="Donut Veículos pendentes x Fichas antecipadas">
							<div class="donutHole">
								<div class="donutLabel"><span id="donut_vp_a">0</span>/<span id="donut_vp_b">0</span></div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Header especial entre os grupos -->
			<div style="grid-column:1/-1; margin:0px 0 0 0;">
				<header class="top daily secondary">
					<h1 id="pageTitleC3">Recebimento (C3) CAD UDI</h1>
				</header>
			</div>
			<div class="list">
				<h3>Descargas (C3)</h3>
				<p class="muted">Quantidade de Descargas (C3) e os veículos e suas porcentagens no dia feito</p>
				<div class="value" id="v_desc_qtd">0</div>
				<ul id="list_descargas"></ul>
				<div class="sumLine" id="sum_desc_qtd">Total de paletes Descarregado C3: 0</div>
			</div>
			<div class="list">
				<h3>Carregamentos (C3)</h3>
				<p class="muted">Quantidade de carregamentos (C3) e os veículos e suas porcentagens no dia feito</p>
				<div class="value" id="v_carr_qtd">0</div>
				<ul id="list_carreg"></ul>
				<div class="sumLine" id="sum_carr_qtd">Total de paletes Carregados C3: 0</div>
			</div>
			<!-- Comparativo imediatamente abaixo de Descargas x Carregamentos -->
			<div class="list list-dual">
				<h3>Comparativo do dia (Descargas x Carregamentos)</h3>
				<div class="dualBox">
					<div class="dualLeft">
						<div class="dualRow">
							<span class="label">Descargas (C3)</span>
							<span class="numbers" id="dual_dc_val_a">0</span>
						</div>
						<div class="dualWrap"><div class="dualFill a" id="dual_dc_fill_a" style="width:0%"></div></div>
						<div class="dualRow">
							<span class="label">Carregamentos (C3)</span>
							<span class="numbers" id="dual_dc_val_b">0</span>
						</div>
						<div class="dualWrap"><div class="dualFill b" id="dual_dc_fill_b" style="width:0%"></div></div>
					</div>
					<div class="dualRight">
						<div class="donut" id="donut_dc" aria-label="Donut Descargas x Carregamentos">
							<div class="donutHole">
								<div class="donutLabel"><span id="donut_dc_a">0</span>/<span id="donut_dc_b">0</span></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="obs">
			<h3>Observação</h3>
			<p class="muted">Que e a observação diária sobre a produção</p>
			<div id="obs_editor" class="obsEditor" style="display:none">
				<div id="obs_toolbar" class="rteToolbar">
					<button type="button" data-cmd="bold"><strong>N</strong></button>
					<button type="button" data-cmd="italic"><em>I</em></button>
					<button type="button" data-cmd="underline"><u>S</u></button>
					<span class="sep"></span>
					<button type="button" data-cmd="formatBlock" data-val="H3">Título</button>
					<button type="button" data-cmd="formatBlock" data-val="P">Parágrafo</button>
					<button type="button" data-cmd="insertUnorderedList">Lista •</button>
					<button type="button" data-cmd="insertOrderedList">Lista 1.</button>
					<span class="sep"></span>
					<label class="small">Cor <input type="color" id="rte_color" /></label>
					<label class="small">Fundo <input type="color" id="rte_bg" /></label>
					<select id="rte_font" title="Fonte">
						<option value="">Fonte</option>
						<option>Segoe UI</option>
						<option>Roboto</option>
						<option>Arial</option>
						<option>Georgia</option>
						<option>Courier New</option>
					</select>
					<select id="rte_size" title="Tamanho">
						<option value="">Tam</option>
						<option value="12">12</option>
						<option value="14">14</option>
						<option value="16">16</option>
						<option value="18">18</option>
						<option value="20">20</option>
						<option value="24">24</option>
					</select>
					<span class="sep"></span>
					<button type="button" data-cmd="justifyLeft">⟸</button>
					<button type="button" data-cmd="justifyCenter">⟺</button>
					<button type="button" data-cmd="justifyRight">⟹</button>
					<span class="sep"></span>
					<button type="button" id="rte_clear">Limpar</button>
				</div>
				<div id="obs_rte" class="rteArea" contenteditable="true" spellcheck="false"></div>
				<div class="row">
					<button id="obs_save" type="button">Salvar</button>
					<button id="obs_cancel" type="button">Cancelar</button>
				</div>
			</div>
			<div id="obs_list"></div>
		</section>
	</main>
</body>
</html>

